{"ast":null,"code":"var _jsxFileName = \"/home/yonjanregmi/Thermal_cam/tdm/frontend/src/components/User2KonfigModus.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState, useRef } from \"react\";\nimport { SocketContext } from \"./SocketContext\";\nimport User1Features from \"./User1TemperaturAuslesen\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function User2KonfigModus({\n  onLogout\n}) {\n  _s();\n  const socket = useContext(SocketContext);\n  const [schwelle, setSchwelle] = useState(\"\");\n  const [aktuelleSchwelle, setAktuelleSchwelle] = useState(null);\n  const [konfigModus, setKonfigModus] = useState(false);\n  const [loadingKonfig, setLoadingKonfig] = useState(false);\n  const [nachricht, setNachricht] = useState(\"\");\n  const [lockStatus, setLockStatus] = useState(\"none\"); // \"none\", \"waiting\", \"granted\", \"denied\"\n  const [lockDeniedReason, setLockDeniedReason] = useState(\"\");\n  const timeoutRef = useRef(null);\n\n  // === LOCK-LOGIK ===\n\n  // Lock anfragen\n  const handleLockRequest = () => {\n    setLockStatus(\"waiting\");\n    setNachricht(\"Frage Lock für Konfigurationsmodus an...\");\n    socket.emit(\"requestConfig\");\n  };\n\n  // Lock explizit freigeben\n  const handleLockRelease = () => {\n    socket.emit(\"releaseConfig\");\n    setNachricht(\"Lock wird freigegeben...\");\n    setLockStatus(\"none\");\n  };\n  useEffect(() => {\n    function handleLockSuccess() {\n      setLockStatus(\"granted\");\n      setNachricht(\"Lock erhalten! Du kannst jetzt den Konfigurationsmodus starten.\");\n      setLoadingKonfig(false);\n    }\n    function handleLockDenied(data) {\n      setLockStatus(\"denied\");\n      setLockDeniedReason((data === null || data === void 0 ? void 0 : data.reason) || \"\");\n      setNachricht((data === null || data === void 0 ? void 0 : data.reason) === \"already_locked\" ? \"Lock ist bereits von einem anderen Benutzer belegt. Warte auf Freigabe.\" : \"Lock abgelehnt: \" + ((data === null || data === void 0 ? void 0 : data.reason) || \"\"));\n      setLoadingKonfig(false);\n    }\n    function handleLockReleased() {\n      setLockStatus(\"none\");\n      setNachricht(\"Lock wurde freigegeben.\");\n    }\n    function handleLockReleasedDenied(data) {\n      setNachricht(\"Lock konnte nicht freigegeben werden: \" + ((data === null || data === void 0 ? void 0 : data.reason) || \"\"));\n    }\n    function handleLockFreed() {\n      setNachricht(\"Lock ist frei! Du kannst es erneut versuchen.\");\n      // Optional: Automatisch erneut anfragen:\n      // handleLockRequest();\n    }\n    socket.on(\"lockConfigSuccess\", handleLockSuccess);\n    socket.on(\"lockConfigDenied\", handleLockDenied);\n    socket.on(\"lockReleased\", handleLockReleased);\n    socket.on(\"lockReleasedDenied\", handleLockReleasedDenied);\n    socket.on(\"lockFreed\", handleLockFreed);\n    return () => {\n      socket.off(\"lockConfigSuccess\", handleLockSuccess);\n      socket.off(\"lockConfigDenied\", handleLockDenied);\n      socket.off(\"lockReleased\", handleLockReleased);\n      socket.off(\"lockReleasedDenied\", handleLockReleasedDenied);\n      socket.off(\"lockFreed\", handleLockFreed);\n    };\n  }, [socket]);\n  const handleKonfigButton = () => {\n    setLoadingKonfig(true);\n    setNachricht(\"Frage Lock für Konfigurationsmodus an...\");\n    socket.emit(\"requestConfig\");\n  };\n  useEffect(() => {\n    function handleKonfigStatus(status) {\n      setLoadingKonfig(false);\n      setKonfigModus(status);\n      if (status) {\n        setNachricht(\"Konfigurationsmodus ist bereits aktiv. Du kannst ihn jetzt verlassen.\");\n      } else {\n        handleKonfigStart();\n      }\n    }\n    socket.on(\"konfigStatus\", handleKonfigStatus);\n    return () => socket.off(\"konfigStatus\", handleKonfigStatus);\n  }, [socket]);\n  useEffect(() => {\n    function handleSchwelle(wert) {\n      setAktuelleSchwelle(wert);\n      setSchwelle(wert);\n    }\n    function handleError(msg) {\n      setNachricht(msg);\n    }\n    function handleInfo(msg) {\n      setNachricht(msg);\n      if (msg.includes(\"System bereit zur Konfiguration\")) {\n        setKonfigModus(true);\n        if (timeoutRef.current) {\n          clearTimeout(timeoutRef.current);\n          timeoutRef.current = null;\n        }\n      }\n      if (msg.includes(\"Konfiguration NICHT möglich\") || msg.includes(\"Konfigurationsmodus verlassen\")) {\n        setKonfigModus(false);\n        if (timeoutRef.current) {\n          clearTimeout(timeoutRef.current);\n          timeoutRef.current = null;\n        }\n      }\n    }\n    socket.on(\"schwelle\", handleSchwelle);\n    socket.on(\"schwelleError\", handleError);\n    socket.on(\"info\", handleInfo);\n    socket.emit(\"getSchwelle\");\n    return () => {\n      socket.off(\"schwelle\", handleSchwelle);\n      socket.off(\"schwelleError\", handleError);\n      socket.off(\"info\", handleInfo);\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\n    };\n  }, [socket]);\n  useEffect(() => {\n    function handleBeforeUnload(e) {\n      if (konfigModus) {\n        if (navigator.sendBeacon) {\n          const url = \"/konfigEnde\";\n          const data = JSON.stringify({\n            reason: \"browser-leave\"\n          });\n          navigator.sendBeacon(url, data);\n        } else {\n          socket.emit(\"konfigEnde\");\n        }\n        e.preventDefault();\n        e.returnValue = \"Der Konfigurationsmodus wird beendet. Bitte stelle sicher, dass alle Änderungen gespeichert sind.\";\n        return e.returnValue;\n      }\n    }\n    window.addEventListener(\"beforeunload\", handleBeforeUnload);\n    return () => window.removeEventListener(\"beforeunload\", handleBeforeUnload);\n  }, [konfigModus, socket]);\n  useEffect(() => {\n    function handleDisconnect() {\n      if (konfigModus) {\n        setKonfigModus(false);\n        setNachricht(\"Verbindung zum Server verloren. Konfigurationsmodus wurde beendet.\");\n      }\n    }\n    socket.on(\"disconnect\", handleDisconnect);\n    return () => socket.off(\"disconnect\", handleDisconnect);\n  }, [konfigModus, socket]);\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!socket) return;\n    socket.emit(\"setSchwelle\", schwelle);\n  };\n  const handleKonfigStart = () => {\n    socket.emit(\"konfigStart\");\n    setNachricht(\"Warte auf Systemfreigabe...\");\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\n    timeoutRef.current = setTimeout(() => {\n      setNachricht(\"Timeout: Keine Rückmeldung vom System. Konfiguration NICHT möglich.\");\n      setKonfigModus(false);\n      timeoutRef.current = null;\n    }, 7000);\n  };\n  const handleKonfigEnde = () => {\n    socket.emit(\"konfigEnde\");\n    setNachricht(\"Konfigurationsmodus verlassen.\");\n    setKonfigModus(false);\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\n    timeoutRef.current = null;\n  };\n  const handleLogout = () => {\n    if (konfigModus) {\n      if (navigator.sendBeacon) {\n        const url = \"/konfigEnde\";\n        const data = JSON.stringify({\n          reason: \"logout\"\n        });\n        navigator.sendBeacon(url, data);\n      } else {\n        socket.emit(\"konfigEnde\");\n      }\n      alert(\"Der Konfigurationsmodus wird jetzt beendet.\");\n      setTimeout(() => {\n        onLogout && onLogout();\n      }, 200);\n      return;\n    }\n    onLogout && onLogout();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-4\",\n    children: [/*#__PURE__*/_jsxDEV(User1Features, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"mb-4\",\n        children: \"Temperaturschwelle konfigurieren\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-wrap align-items-center gap-3 mb-3\",\n        children: loadingKonfig ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          disabled: true,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"spinner-border spinner-border-sm me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this), \"Pr\\xFCfe Status ...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this) : konfigModus ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger\",\n          onClick: handleKonfigEnde,\n          children: \"Konfigurationsmodus verlassen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: handleKonfigButton,\n          children: \"In den Konfigurationsmodus wechseln\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"d-flex flex-wrap align-items-end gap-2 mb-3\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label mb-0 me-2\",\n            children: \"Schwelle (\\xB0C):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: schwelle,\n            onChange: e => setSchwelle(e.target.value),\n            step: \"1\",\n            min: \"0\",\n            max: \"250\",\n            className: `form-control d-inline-block ${konfigModus ? \"border-success shadow\" : \"\"}`,\n            style: {\n              width: 120,\n              outline: konfigModus ? \"2px solid #198754\" : \"\",\n              boxShadow: konfigModus ? \"0 0 6px 2px #6f6\" : \"\",\n              transition: \"box-shadow 0.2s, border 0.2s\"\n            },\n            disabled: !konfigModus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-success\",\n          disabled: !konfigModus,\n          children: \"Schwelle setzen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Aktuelle Schwelle (vom Server):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), \" \", aktuelleSchwelle !== null ? `${aktuelleSchwelle} °C` : \"Lädt...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), nachricht && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-info py-2 mb-0\",\n        style: {\n          color: \"blue\"\n        },\n        children: nachricht\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 223,\n    columnNumber: 5\n  }, this);\n}\n_s(User2KonfigModus, \"WJVWJam5i8t9sghpeQqKC1ssp70=\");\n_c = User2KonfigModus;\nvar _c;\n$RefreshReg$(_c, \"User2KonfigModus\");","map":{"version":3,"names":["React","useContext","useEffect","useState","useRef","SocketContext","User1Features","jsxDEV","_jsxDEV","User2KonfigModus","onLogout","_s","socket","schwelle","setSchwelle","aktuelleSchwelle","setAktuelleSchwelle","konfigModus","setKonfigModus","loadingKonfig","setLoadingKonfig","nachricht","setNachricht","lockStatus","setLockStatus","lockDeniedReason","setLockDeniedReason","timeoutRef","handleLockRequest","emit","handleLockRelease","handleLockSuccess","handleLockDenied","data","reason","handleLockReleased","handleLockReleasedDenied","handleLockFreed","on","off","handleKonfigButton","handleKonfigStatus","status","handleKonfigStart","handleSchwelle","wert","handleError","msg","handleInfo","includes","current","clearTimeout","handleBeforeUnload","e","navigator","sendBeacon","url","JSON","stringify","preventDefault","returnValue","window","addEventListener","removeEventListener","handleDisconnect","handleSubmit","setTimeout","handleKonfigEnde","handleLogout","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","disabled","onClick","onSubmit","type","value","onChange","target","step","min","max","style","width","outline","boxShadow","transition","color","_c","$RefreshReg$"],"sources":["/home/yonjanregmi/Thermal_cam/tdm/frontend/src/components/User2KonfigModus.js"],"sourcesContent":["import React, { useContext, useEffect, useState, useRef } from \"react\";\r\nimport { SocketContext } from \"./SocketContext\";\r\nimport User1Features from \"./User1TemperaturAuslesen\";\r\n\r\nexport default function User2KonfigModus({ onLogout }) {\r\n  const socket = useContext(SocketContext);\r\n\r\n  const [schwelle, setSchwelle] = useState(\"\");\r\n  const [aktuelleSchwelle, setAktuelleSchwelle] = useState(null);\r\n  const [konfigModus, setKonfigModus] = useState(false);\r\n  const [loadingKonfig, setLoadingKonfig] = useState(false);\r\n  const [nachricht, setNachricht] = useState(\"\");\r\n  const [lockStatus, setLockStatus] = useState(\"none\"); // \"none\", \"waiting\", \"granted\", \"denied\"\r\n  const [lockDeniedReason, setLockDeniedReason] = useState(\"\");\r\n  const timeoutRef = useRef(null);\r\n\r\n  // === LOCK-LOGIK ===\r\n\r\n  // Lock anfragen\r\n  const handleLockRequest = () => {\r\n    setLockStatus(\"waiting\");\r\n    setNachricht(\"Frage Lock für Konfigurationsmodus an...\");\r\n    socket.emit(\"requestConfig\");\r\n  };\r\n\r\n  // Lock explizit freigeben\r\n  const handleLockRelease = () => {\r\n    socket.emit(\"releaseConfig\");\r\n    setNachricht(\"Lock wird freigegeben...\");\r\n    setLockStatus(\"none\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    function handleLockSuccess() {\r\n      setLockStatus(\"granted\");\r\n      setNachricht(\"Lock erhalten! Du kannst jetzt den Konfigurationsmodus starten.\");\r\n      setLoadingKonfig(false);\r\n    }\r\n    function handleLockDenied(data) {\r\n      setLockStatus(\"denied\");\r\n      setLockDeniedReason(data?.reason || \"\");\r\n      setNachricht(\r\n        data?.reason === \"already_locked\"\r\n          ? \"Lock ist bereits von einem anderen Benutzer belegt. Warte auf Freigabe.\"\r\n          : \"Lock abgelehnt: \" + (data?.reason || \"\")\r\n      );\r\n      setLoadingKonfig(false);\r\n    }\r\n    function handleLockReleased() {\r\n      setLockStatus(\"none\");\r\n      setNachricht(\"Lock wurde freigegeben.\");\r\n    }\r\n    function handleLockReleasedDenied(data) {\r\n      setNachricht(\"Lock konnte nicht freigegeben werden: \" + (data?.reason || \"\"));\r\n    }\r\n    function handleLockFreed() {\r\n      setNachricht(\"Lock ist frei! Du kannst es erneut versuchen.\");\r\n      // Optional: Automatisch erneut anfragen:\r\n      // handleLockRequest();\r\n    }\r\n\r\n    socket.on(\"lockConfigSuccess\", handleLockSuccess);\r\n    socket.on(\"lockConfigDenied\", handleLockDenied);\r\n    socket.on(\"lockReleased\", handleLockReleased);\r\n    socket.on(\"lockReleasedDenied\", handleLockReleasedDenied);\r\n    socket.on(\"lockFreed\", handleLockFreed);\r\n\r\n    return () => {\r\n      socket.off(\"lockConfigSuccess\", handleLockSuccess);\r\n      socket.off(\"lockConfigDenied\", handleLockDenied);\r\n      socket.off(\"lockReleased\", handleLockReleased);\r\n      socket.off(\"lockReleasedDenied\", handleLockReleasedDenied);\r\n      socket.off(\"lockFreed\", handleLockFreed);\r\n    };\r\n  }, [socket]);\r\n\r\n  const handleKonfigButton = () => {\r\n    setLoadingKonfig(true);\r\n    setNachricht(\"Frage Lock für Konfigurationsmodus an...\");\r\n    socket.emit(\"requestConfig\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    function handleKonfigStatus(status) {\r\n      setLoadingKonfig(false);\r\n      setKonfigModus(status);\r\n      if (status) {\r\n        setNachricht(\r\n          \"Konfigurationsmodus ist bereits aktiv. Du kannst ihn jetzt verlassen.\"\r\n        );\r\n      } else {\r\n        handleKonfigStart();\r\n      }\r\n    }\r\n    socket.on(\"konfigStatus\", handleKonfigStatus);\r\n    return () => socket.off(\"konfigStatus\", handleKonfigStatus);\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    function handleSchwelle(wert) {\r\n      setAktuelleSchwelle(wert);\r\n      setSchwelle(wert);\r\n    }\r\n\r\n    function handleError(msg) {\r\n      setNachricht(msg);\r\n    }\r\n\r\n    function handleInfo(msg) {\r\n      setNachricht(msg);\r\n      if (msg.includes(\"System bereit zur Konfiguration\")) {\r\n        setKonfigModus(true);\r\n        if (timeoutRef.current) {\r\n          clearTimeout(timeoutRef.current);\r\n          timeoutRef.current = null;\r\n        }\r\n      }\r\n      if (\r\n        msg.includes(\"Konfiguration NICHT möglich\") ||\r\n        msg.includes(\"Konfigurationsmodus verlassen\")\r\n      ) {\r\n        setKonfigModus(false);\r\n        if (timeoutRef.current) {\r\n          clearTimeout(timeoutRef.current);\r\n          timeoutRef.current = null;\r\n        }\r\n      }\r\n    }\r\n\r\n    socket.on(\"schwelle\", handleSchwelle);\r\n    socket.on(\"schwelleError\", handleError);\r\n    socket.on(\"info\", handleInfo);\r\n\r\n    socket.emit(\"getSchwelle\");\r\n\r\n    return () => {\r\n      socket.off(\"schwelle\", handleSchwelle);\r\n      socket.off(\"schwelleError\", handleError);\r\n      socket.off(\"info\", handleInfo);\r\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n    };\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    function handleBeforeUnload(e) {\r\n      if (konfigModus) {\r\n        if (navigator.sendBeacon) {\r\n          const url = \"/konfigEnde\";\r\n          const data = JSON.stringify({ reason: \"browser-leave\" });\r\n          navigator.sendBeacon(url, data);\r\n        } else {\r\n          socket.emit(\"konfigEnde\");\r\n        }\r\n        e.preventDefault();\r\n        e.returnValue =\r\n          \"Der Konfigurationsmodus wird beendet. Bitte stelle sicher, dass alle Änderungen gespeichert sind.\";\r\n        return e.returnValue;\r\n      }\r\n    }\r\n    window.addEventListener(\"beforeunload\", handleBeforeUnload);\r\n    return () => window.removeEventListener(\"beforeunload\", handleBeforeUnload);\r\n  }, [konfigModus, socket]);\r\n\r\n  useEffect(() => {\r\n    function handleDisconnect() {\r\n      if (konfigModus) {\r\n        setKonfigModus(false);\r\n        setNachricht(\r\n          \"Verbindung zum Server verloren. Konfigurationsmodus wurde beendet.\"\r\n        );\r\n      }\r\n    }\r\n    socket.on(\"disconnect\", handleDisconnect);\r\n    return () => socket.off(\"disconnect\", handleDisconnect);\r\n  }, [konfigModus, socket]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!socket) return;\r\n    socket.emit(\"setSchwelle\", schwelle);\r\n  };\r\n\r\n  const handleKonfigStart = () => {\r\n    socket.emit(\"konfigStart\");\r\n    setNachricht(\"Warte auf Systemfreigabe...\");\r\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n    timeoutRef.current = setTimeout(() => {\r\n      setNachricht(\r\n        \"Timeout: Keine Rückmeldung vom System. Konfiguration NICHT möglich.\"\r\n      );\r\n      setKonfigModus(false);\r\n      timeoutRef.current = null;\r\n    }, 7000);\r\n  };\r\n\r\n  const handleKonfigEnde = () => {\r\n    socket.emit(\"konfigEnde\");\r\n    setNachricht(\"Konfigurationsmodus verlassen.\");\r\n    setKonfigModus(false);\r\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n    timeoutRef.current = null;\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    if (konfigModus) {\r\n      if (navigator.sendBeacon) {\r\n        const url = \"/konfigEnde\";\r\n        const data = JSON.stringify({ reason: \"logout\" });\r\n        navigator.sendBeacon(url, data);\r\n      } else {\r\n        socket.emit(\"konfigEnde\");\r\n      }\r\n      alert(\"Der Konfigurationsmodus wird jetzt beendet.\");\r\n      setTimeout(() => {\r\n        onLogout && onLogout();\r\n      }, 200);\r\n      return;\r\n    }\r\n    onLogout && onLogout();\r\n  };\r\n\r\n  return (\r\n    <div className=\"container py-4\">\r\n      <User1Features />\r\n      <div className=\"mt-5\">\r\n        <h3 className=\"mb-4\">Temperaturschwelle konfigurieren</h3>\r\n        <div className=\"d-flex flex-wrap align-items-center gap-3 mb-3\">\r\n          {loadingKonfig ? (\r\n            <button className=\"btn btn-secondary\" disabled>\r\n              <span className=\"spinner-border spinner-border-sm me-2\" />\r\n              Prüfe Status ...\r\n            </button>\r\n          ) : konfigModus ? (\r\n            <button className=\"btn btn-danger\" onClick={handleKonfigEnde}>\r\n              Konfigurationsmodus verlassen\r\n            </button>\r\n          ) : (\r\n            <button className=\"btn btn-primary\" onClick={handleKonfigButton}>\r\n              In den Konfigurationsmodus wechseln\r\n            </button>\r\n          )}\r\n        </div>\r\n        <form\r\n          className=\"d-flex flex-wrap align-items-end gap-2 mb-3\"\r\n          onSubmit={handleSubmit}\r\n        >\r\n          <div>\r\n            <label className=\"form-label mb-0 me-2\">Schwelle (°C):</label>\r\n            <input\r\n              type=\"number\"\r\n              value={schwelle}\r\n              onChange={(e) => setSchwelle(e.target.value)}\r\n              step=\"1\"\r\n              min=\"0\"\r\n              max=\"250\"\r\n              className={`form-control d-inline-block ${\r\n                konfigModus ? \"border-success shadow\" : \"\"\r\n              }`}\r\n              style={{\r\n                width: 120,\r\n                outline: konfigModus ? \"2px solid #198754\" : \"\",\r\n                boxShadow: konfigModus ? \"0 0 6px 2px #6f6\" : \"\",\r\n                transition: \"box-shadow 0.2s, border 0.2s\",\r\n              }}\r\n              disabled={!konfigModus}\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"btn btn-success\"\r\n            disabled={!konfigModus}\r\n          >\r\n            Schwelle setzen\r\n          </button>\r\n        </form>\r\n        <div className=\"mb-2\">\r\n          <strong>Aktuelle Schwelle (vom Server):</strong>{\" \"}\r\n          {aktuelleSchwelle !== null ? `${aktuelleSchwelle} °C` : \"Lädt...\"}\r\n        </div>\r\n        {nachricht && (\r\n          <div className=\"alert alert-info py-2 mb-0\" style={{ color: \"blue\" }}>\r\n            {nachricht}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AACtE,SAASC,aAAa,QAAQ,iBAAiB;AAC/C,OAAOC,aAAa,MAAM,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtD,eAAe,SAASC,gBAAgBA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACrD,MAAMC,MAAM,GAAGX,UAAU,CAACI,aAAa,CAAC;EAExC,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACY,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAC9D,MAAM,CAACc,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACgB,aAAa,EAAEC,gBAAgB,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACkB,SAAS,EAAEC,YAAY,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACoB,UAAU,EAAEC,aAAa,CAAC,GAAGrB,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;EACtD,MAAM,CAACsB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAMwB,UAAU,GAAGvB,MAAM,CAAC,IAAI,CAAC;;EAE/B;;EAEA;EACA,MAAMwB,iBAAiB,GAAGA,CAAA,KAAM;IAC9BJ,aAAa,CAAC,SAAS,CAAC;IACxBF,YAAY,CAAC,0CAA0C,CAAC;IACxDV,MAAM,CAACiB,IAAI,CAAC,eAAe,CAAC;EAC9B,CAAC;;EAED;EACA,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;IAC9BlB,MAAM,CAACiB,IAAI,CAAC,eAAe,CAAC;IAC5BP,YAAY,CAAC,0BAA0B,CAAC;IACxCE,aAAa,CAAC,MAAM,CAAC;EACvB,CAAC;EAEDtB,SAAS,CAAC,MAAM;IACd,SAAS6B,iBAAiBA,CAAA,EAAG;MAC3BP,aAAa,CAAC,SAAS,CAAC;MACxBF,YAAY,CAAC,iEAAiE,CAAC;MAC/EF,gBAAgB,CAAC,KAAK,CAAC;IACzB;IACA,SAASY,gBAAgBA,CAACC,IAAI,EAAE;MAC9BT,aAAa,CAAC,QAAQ,CAAC;MACvBE,mBAAmB,CAAC,CAAAO,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEC,MAAM,KAAI,EAAE,CAAC;MACvCZ,YAAY,CACV,CAAAW,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEC,MAAM,MAAK,gBAAgB,GAC7B,yEAAyE,GACzE,kBAAkB,IAAI,CAAAD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEC,MAAM,KAAI,EAAE,CAC9C,CAAC;MACDd,gBAAgB,CAAC,KAAK,CAAC;IACzB;IACA,SAASe,kBAAkBA,CAAA,EAAG;MAC5BX,aAAa,CAAC,MAAM,CAAC;MACrBF,YAAY,CAAC,yBAAyB,CAAC;IACzC;IACA,SAASc,wBAAwBA,CAACH,IAAI,EAAE;MACtCX,YAAY,CAAC,wCAAwC,IAAI,CAAAW,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEC,MAAM,KAAI,EAAE,CAAC,CAAC;IAC/E;IACA,SAASG,eAAeA,CAAA,EAAG;MACzBf,YAAY,CAAC,+CAA+C,CAAC;MAC7D;MACA;IACF;IAEAV,MAAM,CAAC0B,EAAE,CAAC,mBAAmB,EAAEP,iBAAiB,CAAC;IACjDnB,MAAM,CAAC0B,EAAE,CAAC,kBAAkB,EAAEN,gBAAgB,CAAC;IAC/CpB,MAAM,CAAC0B,EAAE,CAAC,cAAc,EAAEH,kBAAkB,CAAC;IAC7CvB,MAAM,CAAC0B,EAAE,CAAC,oBAAoB,EAAEF,wBAAwB,CAAC;IACzDxB,MAAM,CAAC0B,EAAE,CAAC,WAAW,EAAED,eAAe,CAAC;IAEvC,OAAO,MAAM;MACXzB,MAAM,CAAC2B,GAAG,CAAC,mBAAmB,EAAER,iBAAiB,CAAC;MAClDnB,MAAM,CAAC2B,GAAG,CAAC,kBAAkB,EAAEP,gBAAgB,CAAC;MAChDpB,MAAM,CAAC2B,GAAG,CAAC,cAAc,EAAEJ,kBAAkB,CAAC;MAC9CvB,MAAM,CAAC2B,GAAG,CAAC,oBAAoB,EAAEH,wBAAwB,CAAC;MAC1DxB,MAAM,CAAC2B,GAAG,CAAC,WAAW,EAAEF,eAAe,CAAC;IAC1C,CAAC;EACH,CAAC,EAAE,CAACzB,MAAM,CAAC,CAAC;EAEZ,MAAM4B,kBAAkB,GAAGA,CAAA,KAAM;IAC/BpB,gBAAgB,CAAC,IAAI,CAAC;IACtBE,YAAY,CAAC,0CAA0C,CAAC;IACxDV,MAAM,CAACiB,IAAI,CAAC,eAAe,CAAC;EAC9B,CAAC;EAED3B,SAAS,CAAC,MAAM;IACd,SAASuC,kBAAkBA,CAACC,MAAM,EAAE;MAClCtB,gBAAgB,CAAC,KAAK,CAAC;MACvBF,cAAc,CAACwB,MAAM,CAAC;MACtB,IAAIA,MAAM,EAAE;QACVpB,YAAY,CACV,uEACF,CAAC;MACH,CAAC,MAAM;QACLqB,iBAAiB,CAAC,CAAC;MACrB;IACF;IACA/B,MAAM,CAAC0B,EAAE,CAAC,cAAc,EAAEG,kBAAkB,CAAC;IAC7C,OAAO,MAAM7B,MAAM,CAAC2B,GAAG,CAAC,cAAc,EAAEE,kBAAkB,CAAC;EAC7D,CAAC,EAAE,CAAC7B,MAAM,CAAC,CAAC;EAEZV,SAAS,CAAC,MAAM;IACd,SAAS0C,cAAcA,CAACC,IAAI,EAAE;MAC5B7B,mBAAmB,CAAC6B,IAAI,CAAC;MACzB/B,WAAW,CAAC+B,IAAI,CAAC;IACnB;IAEA,SAASC,WAAWA,CAACC,GAAG,EAAE;MACxBzB,YAAY,CAACyB,GAAG,CAAC;IACnB;IAEA,SAASC,UAAUA,CAACD,GAAG,EAAE;MACvBzB,YAAY,CAACyB,GAAG,CAAC;MACjB,IAAIA,GAAG,CAACE,QAAQ,CAAC,iCAAiC,CAAC,EAAE;QACnD/B,cAAc,CAAC,IAAI,CAAC;QACpB,IAAIS,UAAU,CAACuB,OAAO,EAAE;UACtBC,YAAY,CAACxB,UAAU,CAACuB,OAAO,CAAC;UAChCvB,UAAU,CAACuB,OAAO,GAAG,IAAI;QAC3B;MACF;MACA,IACEH,GAAG,CAACE,QAAQ,CAAC,6BAA6B,CAAC,IAC3CF,GAAG,CAACE,QAAQ,CAAC,+BAA+B,CAAC,EAC7C;QACA/B,cAAc,CAAC,KAAK,CAAC;QACrB,IAAIS,UAAU,CAACuB,OAAO,EAAE;UACtBC,YAAY,CAACxB,UAAU,CAACuB,OAAO,CAAC;UAChCvB,UAAU,CAACuB,OAAO,GAAG,IAAI;QAC3B;MACF;IACF;IAEAtC,MAAM,CAAC0B,EAAE,CAAC,UAAU,EAAEM,cAAc,CAAC;IACrChC,MAAM,CAAC0B,EAAE,CAAC,eAAe,EAAEQ,WAAW,CAAC;IACvClC,MAAM,CAAC0B,EAAE,CAAC,MAAM,EAAEU,UAAU,CAAC;IAE7BpC,MAAM,CAACiB,IAAI,CAAC,aAAa,CAAC;IAE1B,OAAO,MAAM;MACXjB,MAAM,CAAC2B,GAAG,CAAC,UAAU,EAAEK,cAAc,CAAC;MACtChC,MAAM,CAAC2B,GAAG,CAAC,eAAe,EAAEO,WAAW,CAAC;MACxClC,MAAM,CAAC2B,GAAG,CAAC,MAAM,EAAES,UAAU,CAAC;MAC9B,IAAIrB,UAAU,CAACuB,OAAO,EAAEC,YAAY,CAACxB,UAAU,CAACuB,OAAO,CAAC;IAC1D,CAAC;EACH,CAAC,EAAE,CAACtC,MAAM,CAAC,CAAC;EAEZV,SAAS,CAAC,MAAM;IACd,SAASkD,kBAAkBA,CAACC,CAAC,EAAE;MAC7B,IAAIpC,WAAW,EAAE;QACf,IAAIqC,SAAS,CAACC,UAAU,EAAE;UACxB,MAAMC,GAAG,GAAG,aAAa;UACzB,MAAMvB,IAAI,GAAGwB,IAAI,CAACC,SAAS,CAAC;YAAExB,MAAM,EAAE;UAAgB,CAAC,CAAC;UACxDoB,SAAS,CAACC,UAAU,CAACC,GAAG,EAAEvB,IAAI,CAAC;QACjC,CAAC,MAAM;UACLrB,MAAM,CAACiB,IAAI,CAAC,YAAY,CAAC;QAC3B;QACAwB,CAAC,CAACM,cAAc,CAAC,CAAC;QAClBN,CAAC,CAACO,WAAW,GACX,mGAAmG;QACrG,OAAOP,CAAC,CAACO,WAAW;MACtB;IACF;IACAC,MAAM,CAACC,gBAAgB,CAAC,cAAc,EAAEV,kBAAkB,CAAC;IAC3D,OAAO,MAAMS,MAAM,CAACE,mBAAmB,CAAC,cAAc,EAAEX,kBAAkB,CAAC;EAC7E,CAAC,EAAE,CAACnC,WAAW,EAAEL,MAAM,CAAC,CAAC;EAEzBV,SAAS,CAAC,MAAM;IACd,SAAS8D,gBAAgBA,CAAA,EAAG;MAC1B,IAAI/C,WAAW,EAAE;QACfC,cAAc,CAAC,KAAK,CAAC;QACrBI,YAAY,CACV,oEACF,CAAC;MACH;IACF;IACAV,MAAM,CAAC0B,EAAE,CAAC,YAAY,EAAE0B,gBAAgB,CAAC;IACzC,OAAO,MAAMpD,MAAM,CAAC2B,GAAG,CAAC,YAAY,EAAEyB,gBAAgB,CAAC;EACzD,CAAC,EAAE,CAAC/C,WAAW,EAAEL,MAAM,CAAC,CAAC;EAEzB,MAAMqD,YAAY,GAAIZ,CAAC,IAAK;IAC1BA,CAAC,CAACM,cAAc,CAAC,CAAC;IAClB,IAAI,CAAC/C,MAAM,EAAE;IACbA,MAAM,CAACiB,IAAI,CAAC,aAAa,EAAEhB,QAAQ,CAAC;EACtC,CAAC;EAED,MAAM8B,iBAAiB,GAAGA,CAAA,KAAM;IAC9B/B,MAAM,CAACiB,IAAI,CAAC,aAAa,CAAC;IAC1BP,YAAY,CAAC,6BAA6B,CAAC;IAC3C,IAAIK,UAAU,CAACuB,OAAO,EAAEC,YAAY,CAACxB,UAAU,CAACuB,OAAO,CAAC;IACxDvB,UAAU,CAACuB,OAAO,GAAGgB,UAAU,CAAC,MAAM;MACpC5C,YAAY,CACV,qEACF,CAAC;MACDJ,cAAc,CAAC,KAAK,CAAC;MACrBS,UAAU,CAACuB,OAAO,GAAG,IAAI;IAC3B,CAAC,EAAE,IAAI,CAAC;EACV,CAAC;EAED,MAAMiB,gBAAgB,GAAGA,CAAA,KAAM;IAC7BvD,MAAM,CAACiB,IAAI,CAAC,YAAY,CAAC;IACzBP,YAAY,CAAC,gCAAgC,CAAC;IAC9CJ,cAAc,CAAC,KAAK,CAAC;IACrB,IAAIS,UAAU,CAACuB,OAAO,EAAEC,YAAY,CAACxB,UAAU,CAACuB,OAAO,CAAC;IACxDvB,UAAU,CAACuB,OAAO,GAAG,IAAI;EAC3B,CAAC;EAED,MAAMkB,YAAY,GAAGA,CAAA,KAAM;IACzB,IAAInD,WAAW,EAAE;MACf,IAAIqC,SAAS,CAACC,UAAU,EAAE;QACxB,MAAMC,GAAG,GAAG,aAAa;QACzB,MAAMvB,IAAI,GAAGwB,IAAI,CAACC,SAAS,CAAC;UAAExB,MAAM,EAAE;QAAS,CAAC,CAAC;QACjDoB,SAAS,CAACC,UAAU,CAACC,GAAG,EAAEvB,IAAI,CAAC;MACjC,CAAC,MAAM;QACLrB,MAAM,CAACiB,IAAI,CAAC,YAAY,CAAC;MAC3B;MACAwC,KAAK,CAAC,6CAA6C,CAAC;MACpDH,UAAU,CAAC,MAAM;QACfxD,QAAQ,IAAIA,QAAQ,CAAC,CAAC;MACxB,CAAC,EAAE,GAAG,CAAC;MACP;IACF;IACAA,QAAQ,IAAIA,QAAQ,CAAC,CAAC;EACxB,CAAC;EAED,oBACEF,OAAA;IAAK8D,SAAS,EAAC,gBAAgB;IAAAC,QAAA,gBAC7B/D,OAAA,CAACF,aAAa;MAAAkE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACjBnE,OAAA;MAAK8D,SAAS,EAAC,MAAM;MAAAC,QAAA,gBACnB/D,OAAA;QAAI8D,SAAS,EAAC,MAAM;QAAAC,QAAA,EAAC;MAAgC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC1DnE,OAAA;QAAK8D,SAAS,EAAC,gDAAgD;QAAAC,QAAA,EAC5DpD,aAAa,gBACZX,OAAA;UAAQ8D,SAAS,EAAC,mBAAmB;UAACM,QAAQ;UAAAL,QAAA,gBAC5C/D,OAAA;YAAM8D,SAAS,EAAC;UAAuC;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,uBAE5D;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,GACP1D,WAAW,gBACbT,OAAA;UAAQ8D,SAAS,EAAC,gBAAgB;UAACO,OAAO,EAAEV,gBAAiB;UAAAI,QAAA,EAAC;QAE9D;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,gBAETnE,OAAA;UAAQ8D,SAAS,EAAC,iBAAiB;UAACO,OAAO,EAAErC,kBAAmB;UAAA+B,QAAA,EAAC;QAEjE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MACT;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eACNnE,OAAA;QACE8D,SAAS,EAAC,6CAA6C;QACvDQ,QAAQ,EAAEb,YAAa;QAAAM,QAAA,gBAEvB/D,OAAA;UAAA+D,QAAA,gBACE/D,OAAA;YAAO8D,SAAS,EAAC,sBAAsB;YAAAC,QAAA,EAAC;UAAc;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC9DnE,OAAA;YACEuE,IAAI,EAAC,QAAQ;YACbC,KAAK,EAAEnE,QAAS;YAChBoE,QAAQ,EAAG5B,CAAC,IAAKvC,WAAW,CAACuC,CAAC,CAAC6B,MAAM,CAACF,KAAK,CAAE;YAC7CG,IAAI,EAAC,GAAG;YACRC,GAAG,EAAC,GAAG;YACPC,GAAG,EAAC,KAAK;YACTf,SAAS,EAAE,+BACTrD,WAAW,GAAG,uBAAuB,GAAG,EAAE,EACzC;YACHqE,KAAK,EAAE;cACLC,KAAK,EAAE,GAAG;cACVC,OAAO,EAAEvE,WAAW,GAAG,mBAAmB,GAAG,EAAE;cAC/CwE,SAAS,EAAExE,WAAW,GAAG,kBAAkB,GAAG,EAAE;cAChDyE,UAAU,EAAE;YACd,CAAE;YACFd,QAAQ,EAAE,CAAC3D;UAAY;YAAAuD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eACNnE,OAAA;UACEuE,IAAI,EAAC,QAAQ;UACbT,SAAS,EAAC,iBAAiB;UAC3BM,QAAQ,EAAE,CAAC3D,WAAY;UAAAsD,QAAA,EACxB;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eACPnE,OAAA;QAAK8D,SAAS,EAAC,MAAM;QAAAC,QAAA,gBACnB/D,OAAA;UAAA+D,QAAA,EAAQ;QAA+B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EAAC,GAAG,EACnD5D,gBAAgB,KAAK,IAAI,GAAG,GAAGA,gBAAgB,KAAK,GAAG,SAAS;MAAA;QAAAyD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9D,CAAC,EACLtD,SAAS,iBACRb,OAAA;QAAK8D,SAAS,EAAC,4BAA4B;QAACgB,KAAK,EAAE;UAAEK,KAAK,EAAE;QAAO,CAAE;QAAApB,QAAA,EAClElD;MAAS;QAAAmD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACP,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAChE,EAAA,CA3RuBF,gBAAgB;AAAAmF,EAAA,GAAhBnF,gBAAgB;AAAA,IAAAmF,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}